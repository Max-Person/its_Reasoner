@base <http://www.vstu.ru/poas/code> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
# input: A{b:B, k:int} B{c:*C} C{d:int} variables: a:A target:d

# --------- Классы ---------
<#Item>
    rdfs:subClassOf <#Operand> .

<#ItemWithVisibleMemory>
    rdfs:subClassOf <#Item> .

<#Operand>
    rdfs:subClassOf <#Token> .

<#Operator>
    rdfs:subClassOf <#Token> .

<#Value>
    rdfs:subClassOf <#ItemType> .

<#Class>
    a <#ItemType> ;
    <#text_rod_p> "класса"^^xsd:string ;
    <#text_dat_p> "классу"^^xsd:string .

<#Pointer>
    a <#ItemType> ;
    <#text_rod_p> "указателя"^^xsd:string ;
    <#text_dat_p> "указателю"^^xsd:string .

<#ClassObject>
    a <#ItemType> ;
    <#text_rod_p> "объекта"^^xsd:string ;
    <#text_dat_p> "объекту"^^xsd:string .

<#Array>
    a <#ItemType> ;
    <#text_rod_p> "массива"^^xsd:string ;
    <#text_dat_p> "массиву"^^xsd:string .

<#Container>
    a <#ItemType> ;
    <#text_rod_p> "контейнера"^^xsd:string ;
    <#text_dat_p> "контейнеру"^^xsd:string .

<#PointerToMember>
    a <#ItemType> ;
    <#text_rod_p> "указателя типа pointer-to-member"^^xsd:string ;
    <#text_dat_p> "указателю типа pointer-to-member"^^xsd:string .

<#IntegerValue>
    a <#Value> ;
    <#type> "int"^^xsd:string ;
    <#text_rod_p> "целого числа"^^xsd:string ;
    <#text_dat_p> "целому числу"^^xsd:string .

<#FloatValue>
    a <#Value> ;
    <#type> "float"^^xsd:string ;
    <#text_rod_p> "дробного числа"^^xsd:string ;
    <#text_dat_p> "дробному числу"^^xsd:string .

<#StringValue>
    a <#Value> ;
    <#type> "std::string"^^xsd:string ;
    <#text_rod_p> "строки"^^xsd:string ;
    <#text_dat_p> "строке"^^xsd:string .

<#Field>
    a <#ConnectionType> ;
    <#text_tvor_p> "полем объекта"^^xsd:string ;
    <#text_dat_p> "полю объекта"^^xsd:string ;
    <#text_rod_p> "поля объекта"^^xsd:string ;
    <#text_im_p> "поле объекта"^^xsd:string ;
    <#hint_text> "поле объекта с именем"^^xsd:string .

<#PointedItem>
    a <#ConnectionType> ;
    <#text_tvor_p> "указываемым объектом"^^xsd:string ;
    <#text_dat_p> "указываемому объекту"^^xsd:string ;
    <#text_rod_p> "указываемого объекта"^^xsd:string ;
    <#text_im_p> "указываемый объект"^^xsd:string ;
    <#hint_text> "объект по указателю"^^xsd:string .

<#PointedField>
    a <#ConnectionType> ;
    <#text_tvor_p> "полем объекта"^^xsd:string ;
    <#text_dat_p> "полю объекта"^^xsd:string ;
    <#text_rod_p> "поля объекта"^^xsd:string ;
    <#text_im_p> "поле объекта"^^xsd:string ;
    <#hint_text> "поле объекта с именем"^^xsd:string .

<#StaticField>
    a <#ConnectionType> ;
    <#text_tvor_p> "статическим полем объекта"^^xsd:string ;
    <#text_dat_p> "статическому полю объекта"^^xsd:string ;
    <#text_rod_p> "статического поля объекта"^^xsd:string ;
    <#text_im_p> "статическое поле объекта"^^xsd:string ;
    <#hint_text> "статическое поле с именем"^^xsd:string .

<#ArrayDimension>
    a <#ConnectionType> ;
    <#text_tvor_p> "измерением массива"^^xsd:string ;
    <#text_dat_p> "измерению массива"^^xsd:string ;
    <#text_rod_p> "измерения массива"^^xsd:string ;
    <#text_im_p> "измерение массива"^^xsd:string ;
    <#hint_text> "измерение массива с индексом"^^xsd:string .

<#ArrayItem>
    a <#ConnectionType> ;
    <#text_tvor_p> "элементом массива"^^xsd:string ;
    <#text_dat_p> "элементу массива"^^xsd:string ;
    <#text_rod_p> "элемента массива"^^xsd:string ;
    <#text_im_p> "элемент массива"^^xsd:string ;
    <#hint_text> "элемент массива с индексом"^^xsd:string .

<#ContainerItem>
    a <#ConnectionType> ;
    <#text_tvor_p> "элементом контейнера"^^xsd:string ;
    <#text_dat_p> "элементу контейнера"^^xsd:string ;
    <#text_rod_p> "элемента контейнера"^^xsd:string ;
    <#text_im_p> "элемент контейнера"^^xsd:string ;
    <#hint_text> "элемент контейнера с ключом"^^xsd:string .

<#ClassConnection>
    a <#ConnectionType> ;
    <#text_tvor_p> "классом"^^xsd:string ;
    <#text_dat_p> "классу"^^xsd:string ;
    <#text_rod_p> "класса"^^xsd:string ;
    <#text_im_p> "класс"^^xsd:string ;
    <#hint_text> "класс с именем"^^xsd:string .

<#Variable>
    a <#ConnectionType> ;
    <#text_tvor_p> "переменной"^^xsd:string ;
    <#text_dat_p> "переменной"^^xsd:string ;
    <#text_rod_p> "переменной"^^xsd:string ;
    <#text_im_p> "переменная"^^xsd:string ;
    <#hint_text> "переменную с именем"^^xsd:string .

<#PointedMember>
    a <#ConnectionType> ;
    <#text_tvor_p> "указываемым членом"^^xsd:string ;
    <#text_dat_p> "указываемому члену"^^xsd:string ;
    <#text_rod_p> "указываемого члена"^^xsd:string ;
    <#text_im_p> "указываемый член"^^xsd:string ;
    <#hint_text> "член объекта по указателю"^^xsd:string .

<#PontedMemberByPointer>
    a <#ConnectionType> ;
    <#text_tvor_p> "указываемым членом"^^xsd:string ;
    <#text_dat_p> "указываемому члену"^^xsd:string ;
    <#text_rod_p> "указываемого члена"^^xsd:string ;
    <#text_im_p> "указываемый член"^^xsd:string ;
    <#hint_text> "член объекта по указателю"^^xsd:string .

<#Dot>
    a <#OperatorType> ;
    <#text> "."^^xsd:string ;
    <#associated_with> <#Field> ;
    <#can_be_applied_to> <#ClassObject> ;
    <#can_be_applied_to> <#Container> ;
    <#unary> "false"^^xsd:boolean .

<#Arrow>
    a <#OperatorType> ;
    <#text> "->"^^xsd:string ;
    <#associated_with> <#PointedField> ;
    <#can_be_applied_to> <#Pointer> ;
    <#unary> "false"^^xsd:boolean .

<#DoubleColon>
    a <#OperatorType> ;
    <#text> "::"^^xsd:string ;
    <#associated_with> <#StaticField> ;
    <#can_be_applied_to> <#Class> ;
    <#unary> "false"^^xsd:boolean .

<#Asterisk>
    a <#OperatorType> ;
    <#text> "*"^^xsd:string ;
    <#associated_with> <#PointedItem> ;
    <#can_be_applied_to> <#Pointer> ;
    <#can_be_applied_to> <#Array> ;
    <#unary> "true"^^xsd:boolean .

<#SquareBrackets>
    a <#OperatorType> ;
    <#text> "[]"^^xsd:string ;
    <#associated_with> <#ArrayItem> ;
    <#associated_with> <#ArrayDimension> ;
    <#associated_with> <#ContainerItem> ;
    <#can_be_applied_to> <#Array> ;
    <#can_be_applied_to> <#Container> ;
    <#unary> "false"^^xsd:boolean .

<#DotAsterisk>
    a <#OperatorType> ;
    <#text> ".*"^^xsd:string ;
    <#associated_with> <#PointedMember> ;
    <#can_be_applied_to> <#ClassObject> ;
    <#can_be_applied_to> <#Container> ;
    <#unary> "false"^^xsd:boolean .

<#ArrowAsterisk>
    a <#OperatorType> ;
    <#text> "->*"^^xsd:string ;
    <#associated_with> <#PontedMemberByPointer> ;
    <#can_be_applied_to> <#Pointer> ;
    <#can_be_applied_to> <#Array> ;
    <#unary> "false"^^xsd:boolean .

<#ItemName>
    a <#OperandType> ;
    <#can_be_used_with> <#Dot> ;
    <#can_be_used_with> <#Arrow> ;
    <#can_be_used_with> <#DoubleColon> ;
    <#compatible> <#compatible_itemName_arrow_pointer> ;
    <#compatible> <#compatible_itemName_dot_objectItem> ;
    <#compatible> <#compatible_itemName_dot_container> ;
    <#compatible> <#compatible_itemName_doubleColon_class> .
# <#text_im_p> "имя элемента"^^xsd:string .

<#PointerOperand>
    a <#OperandType> ;
    <#can_be_used_with> <#Asterisk> ;
    <#compatible> <#compatible_pointerOperand_asterisk_pointer> ;
    <#compatible> <#compatible_pointerOperand_asterisk_array> .
# <#text_im_p> "указываемый объект"^^xsd:string .

<#IntegerOperand>
    a <#OperandType> ;
    <#can_be_used_with> <#SquareBrackets> ;
    <#compatible> <#compatible_integerOperand_squareBrackets_array> .

<#ItemOperand>
    a <#OperandType> ;
    <#can_be_used_with> <#SquareBrackets> ;
    <#compatible> <#compatible_itemOperand_squareBrackets_container> .

<#PointerToMemberOperand>
    a <#OperandType> ;
    <#can_be_used_with> <#DotAsterisk> ;
    <#can_be_used_with> <#ArrowAsterisk> ;
    <#compatible> <#compatible_pointerToMemberOperand_dotAsterisk_container> ;
    <#compatible> <#compatible_pointerToMemberOperand_dotAsterisk_classObject> ;
    <#compatible> <#compatible_pointerToMemberOperand_arrowAsterisk_pointer> ;
    <#compatible> <#compatible_pointerToMemberOperand_arrowAsterisk_array> .

<#ClassOperand>
    a <#OperandType> .

# ---- Тернарные связи -----

<#compatible_itemName_arrow_pointer>
    <#compatible> <#Arrow> ;
    <#compatible> <#Pointer> .

<#compatible_itemName_dot_objectItem>
    <#compatible> <#Dot> ;
    <#compatible> <#ClassObject> .

<#compatible_itemName_dot_container>
    <#compatible> <#Dot> ;
    <#compatible> <#Container> .

<#compatible_itemName_doubleColon_class>
    <#compatible> <#DoubleColon> ;
    <#compatible> <#Class> .

<#compatible_pointerOperand_asterisk_pointer>
    <#compatible> <#Asterisk> ;
    <#compatible> <#Pointer> .

<#compatible_pointerOperand_asterisk_array>
    <#compatible> <#Asterisk> ;
    <#compatible> <#Array> .

<#compatible_integerOperand_squareBrackets_array>
    <#compatible> <#SquareBrackets> ;
    <#compatible> <#Array> .

<#compatible_compatible_itemOperand_squareBrackets_container>
    <#compatible> <#SquareBrackets> ;
    <#compatible> <#Container> .

<#compatible_pointerToMemberOperand_dotAsterisk_container>
    <#compatible> <#DotAsterisk> ;
    <#compatible> <#Container> .

<#compatible_pointerToMemberOperand_dotAsterisk_classObject>
    <#compatible> <#DotAsterisk> ;
    <#compatible> <#ClassObject> .

<#compatible_pointerToMemberOperand_arrowAsterisk_pointer>
    <#compatible> <#ArrowAsterisk> ;
    <#compatible> <#Pointer> .

<#compatible_pointerToMemberOperand_arrowAsterisk_array>
    <#compatible> <#ArrowAsterisk> ;
    <#compatible> <#Array> .

# ----------------------- Операторы

<#dot>
    a <#Operator> ;
    <#operator_text> "."^^xsd:string ;
    <#operator_type> <#Dot> .

<#arrow>
    a <#Operator> ;
    <#operator_text> "->"^^xsd:string ;
    <#operator_type> <#Arrow> .

<#doubleColon>
    a <#Operator> ;
    <#operator_text> "::"^^xsd:string ;
    <#operator_type> <#DoubleColon> .

<#asterisk>
    a <#Operator> ;
    <#operator_text> "*"^^xsd:string ;
    <#operator_type> <#Asterisk> .

<#squareBrackets>
    a <#Operator> ;
    <#operator_text> "[]"^^xsd:string ;
    <#operator_type> <#SquareBrackets> .

<#dotAsterisk>
    a <#Operator> ;
    <#operator_text> ".*"^^xsd:string ;
    <#operator_type> <#DotAsterisk> .

<#arrowAsterisk>
    a <#Operator> ;
    <#operator_text> "->*"^^xsd:string ;
    <#operator_type> <#ArrowAsterisk> .

# --------- Классы (в задаче) ---------

<#A>
    a <#Item> ;
    <#item_type> <#Class> ;
    <#operand_type> <#ClassOperand> ;
    <#name> "A"^^xsd:string ;
    <#reachable_from> <#A> ;
    <#is_a> <#Class_A> ;
    <#primary_is_a> <#Class_A> ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#text> "A"^^xsd:string ;
    <#operand_id> "8"^^xsd:integer .
    

<#B>
    a <#Item> ;
    <#item_type> <#Class> ;
    <#operand_type> <#ClassOperand> ;
    <#name> "B"^^xsd:string ;
    <#reachable_from> <#B> ;
    <#is_a> <#Class_B> ;
    <#primary_is_a> <#Class_B> ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#text> "B"^^xsd:string ;
    <#operand_id> "9"^^xsd:integer .

<#C>
    a <#Item> ;
    <#item_type> <#Class> ;
    <#operand_type> <#ClassOperand> ;
    <#name> "C"^^xsd:string ;
    <#reachable_from> <#C> ;
    <#is_a> <#Class_C> ;
    <#primary_is_a> <#Class_C> ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#text> "C"^^xsd:string ;
    <#operand_id> "10"^^xsd:integer .

# -------- Объекты --------

<#a>
    a <#Item> ;
    <#item_type> <#ClassObject> ;
    <#operand_type> <#ItemOperand> ;
    <#instance_of> <#A> ;
    <#contains> <#b> ;
    <#contains> <#k> ;
    <#reachable_from> <#a> ;
    <#is_a> <#variable_a> ;
    <#primary_is_a> <#variable_a> ;
    <#has> <#field_a_b> ;
    <#has> <#field_a_k> ;
    <#name> "a"^^xsd:string ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#text> "a"^^xsd:string ;
    <#operand_id> "11"^^xsd:integer ;
    <#var...> "currentItem"^^xsd:string ;
    <#next> <#field_a_b> .

<#b>
    a <#Item> ;
    <#item_type> <#ClassObject> ;
    <#operand_type> <#ItemOperand> ;
    <#instance_of> <#B> ;
    <#contains> <#c> ;
    <#contained_in> <#a> ;
    <#reachable_from> <#a> ;
    <#reachable_from> <#b> ;
    <#is_a> <#field_a_b> ;
    <#primary_is_a> <#field_a_b> ;
    <#has> <#field_b_c> ;
    <#name> "a.b"^^xsd:string ;
    <#was_visited_before> "true"^^xsd:boolean ;
    <#text> "a.b"^^xsd:string ;
    <#operand_id> "12"^^xsd:integer ;
    <#next> <#field_b_c> .

<#c>
    a <#Item> ;
    <#item_type> <#Pointer> ;
    <#contained_in> <#b> ;
    <#reachable_from> <#a> ;
    <#reachable_from> <#b> ;
    <#reachable_from> <#c> ;
    <#is_a> <#field_b_c> ;
    <#primary_is_a> <#field_b_c> ;
    <#has> <#point_to_c_d> ;
    <#has> <#point_to_c_c> ;
    <#name> "c"^^xsd:string ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#operand_type> <#PointerOperand> ;
    <#linked_with> <#point_to_c_c> ;
    <#text> "a.b.c"^^xsd:string ;
    <#operand_id> "13"^^xsd:integer ;
    <#next> <#point_to_c_d> .

<#c_p>
    a <#Item> ;
    <#item_type> <#ClassObject> ;
    <#operand_type> <#ItemOperand> ;
    <#instance_of> <#C> ;
    <#contains> <#d> ;
    <#reachable_from> <#c> ;
    <#reachable_from> <#a> ;
    <#reachable_from> <#b> ;
    <#reachable_from> <#c_p> ;
    <#is_a> <#point_to_c_c> ;
    <#primary_is_a> <#point_to_c_c> ;
    <#has> <#field_c_d> ;
    <#name> ""^^xsd:string ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#text> "*(a.b.c)"^^xsd:string ;
    <#operand_id> "14"^^xsd:integer ;
    <#next> <#field_c_d> .

<#k>
    a <#Item> ;
    <#item_type> <#IntegerValue> ;
    <#operand_type> <#ItemOperand> ;
    <#operand_type> <#IntegerOperand> ;
    <#contained_in> <#a> ;
    <#reachable_from> <#a> ;
    <#reachable_from> <#k> ;
    <#is_a> <#field_a_k> ;
    <#primary_is_a> <#field_a_k> ;
    <#name> "k"^^xsd:string ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#text> "a.k"^^xsd:string ;
    <#operand_id> "15"^^xsd:integer .

<#d>
    a <#Item> ;
    <#item_type> <#Value> ;
    <#operand_type> <#IntegerOperand> ;
    <#contained_in> <#c_p> ;
    <#reachable_from> <#c> ;
    <#reachable_from> <#c_p> ;
    <#reachable_from> <#a> ;
    <#reachable_from> <#b> ;
    <#reachable_from> <#d> ;
    <#is_a> <#field_c_d> ;
    <#is_a> <#point_to_c_d> ;
    <#primary_is_a> <#field_c_d> ; 
    <#name> "d"^^xsd:string ;
    <#was_visited_before> "false"^^xsd:boolean ;
    <#var...> "nextItem"^^xsd:string ;
    <#var...> "targetItem"^^xsd:string ;
    <#text> "a.b.c->d"^^xsd:string ;
    <#operand_id> "16"^^xsd:integer .

# ------- Отношения принадлежности ----------

<#field_a_b>
    a <#Connection> ;
    <#connection_type> <#Field> ;
    <#source> <#a> ;
    <#text> "b"^^xsd:string .

<#field_a_k>
    a <#Connection> ;
    <#connection_type> <#Field> ;
    <#source> <#a> ;
    <#text> "k"^^xsd:string .

<#field_b_c>
    a <#Connection> ;
    <#connection_type> <#Field> ;
    <#source> <#b> ;
    <#text> "c"^^xsd:string .

<#field_c_d>
    a <#Connection> ;
    <#connection_type> <#Field> ;
    <#source> <#c_p> ;
    <#text> "d"^^xsd:string .

<#point_to_c_d>
    a <#Connection> ;
    <#connection_type> <#PointedField> ;
    <#source> <#c> ;
    <#text> "d"^^xsd:string .

<#point_to_c_c>
    a <#Connection> ;
    <#connection_type> <#PointedItem> ;
    <#source> <#c> ;
    <#text> ""^^xsd:string .

<#variable_a>
    a <#Connection> ;
    <#connection_type> <#Variable> ;
    <#text> "a"^^xsd:string .

<#Class_A>
    a <#Connection> ;
    <#connection_type> <#ClassConnection> ;
    <#text> "A"^^xsd:string .

<#Class_B>
    a <#Connection> ;
    <#connection_type> <#ClassConnection> ;
    <#text> "B"^^xsd:string .

<#Class_C>
    a <#Connection> ;
    <#connection_type> <#ClassConnection> ;
    <#text> "C"^^xsd:string .

# -------- Входные данные --------------

<#symbol>
    a <#Element> ;
    <#operator> <#dot> ;
    <#operand> <#item_name_b> ;
    <#var...> "symbol"^^xsd:string .

# ------------ Stage
<#stage>
    a <#Stage> ;
    <#var...> "stage"^^xsd:string ;
    <#current_stage> <#Main> .

# ------------------- Операнды

<#item_name_d>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#point_to_c_d> ;
    <#linked_with> <#field_c_d> ;
    <#text> "d"^^xsd:string ;
    <#operand_id> "3"^^xsd:integer .

<#item_name_a>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#variable_a> ;
    <#text> "a"^^xsd:string ;
    <#operand_id> "0"^^xsd:integer .

<#item_name_b>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#field_a_b> ;
    <#text> "b"^^xsd:string ;
    <#operand_id> "1"^^xsd:integer .

<#item_name_c>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#field_b_c> ;
    <#text> "c"^^xsd:string ;
    <#operand_id> "2"^^xsd:integer .

<#item_name_k>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#field_a_k> ;
    <#text> "k"^^xsd:string ;
    <#operand_id> "4"^^xsd:integer .

<#item_name_A>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#Class_A> ;
    <#text> "A"^^xsd:string ;
    <#operand_id> "5"^^xsd:integer .

<#item_name_B>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#Class_B> ;
    <#text> "B"^^xsd:string ;
    <#operand_id> "6"^^xsd:integer .

<#item_name_C>
    a <#Operand> ;
    <#operand_type> <#ItemName> ;
    <#linked_with> <#Class_C> ;
    <#text> "C"^^xsd:string ;
    <#operand_id> "7"^^xsd:integer .

